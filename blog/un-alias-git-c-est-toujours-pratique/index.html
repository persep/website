<!DOCTYPE html> <html> <head> <title>Un alias git, c'est toujours pratique</title> <meta charset=UTF-8> <meta content="Pour ce blog j'utilise Middleman, j'ai donc un repository pour les sources. Mais dès qu'il s'agit de déployer (i.e. compiler puis pusher les fichiers compilés sur un autre repository, que github:pages reconnait comme devant les mettre en ligne), voil..." name=description> <meta content='width=device-width, initial-scale=1.0, user-scalable=no' name=viewport> <meta content="Un alias git, c'est toujours pratique" property='og:title'> <meta content="Pour ce blog j'utilise Middleman, j'ai donc un repository pour les sources. Mais dès qu'il s'agit de déployer (i.e. compiler puis pusher les fichiers compilés sur un autre repository, que github:pages reconnait comme devant les mettre en ligne), voil..." property='og:description'> <meta content=fr_FR property='og:locale'> <meta content='Alpine Lab' property='og:site_name'> <meta content='http://www.alpine-lab.com/blog/un-alias-git-c-est-toujours-pratique/' property='og:url'> <meta content='http://www.alpine-lab.com../../images/logo-alpinelab-500.png' property='og:image'> <meta content=article property='og:type'> <link href='images/favicon.png' rel=icon> <link href='//fonts.googleapis.com/css?family=Lato:300,400,700%7CMontserrat:400,700' rel=stylesheet> <link href="../../stylesheets/blog-fb2780ef.css" rel=stylesheet /> <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.1/css/font-awesome.min.css" rel=stylesheet /> </head> <body class='blog blog_un-alias-git-c-est-toujours-pratique blog_un-alias-git-c-est-toujours-pratique_index'> <meta content='Alpine Lab, blog technique' itemprop=name> <meta content="On parle de développement web, d'entreprenariat, de Ruby/Rails, de Haml/Slim, de Sass, de CoffeeScript et d'Ember.js" itemprop=description> <meta content='http://www.alpine-lab.com/blog' itemprop=url> <meta content=fr itemprop=inLanguage> <meta content='http://www.alpine-lab.com../../images/logo-alpinelab-500.png' itemprop=image> <div id=wrapper> <header> <a href="/blog"><div class=logo></div> <h1 class=sitename><span class=alpine>Alpine</span><span class=lab>Lab</span> <span class=blog>blog technique</span> </h1> </a> <div class=social-networks> <a target=_blank href="https://github.com/alpinelab"><i class='fa fa-github'></i> </a> <a target=_blank href="https://twitter.com/alpinelab"><i class='fa fa-twitter'></i> </a> </div> </header> <div id=main> <article itemscope itemtype='http://schema.org/BlogPosting'> <meta content="Pour ce blog j'utilise Middleman, j'ai donc un repository pour les sources. Mais dès qu'il s'agit de déployer (i.e. compiler puis pusher les fichiers compilés sur un autre repository, que github:pages reconnait comme devant les mettre en ligne), voil..." itemprop=description> <meta content='http://www.alpine-lab.com/blog/un-alias-git-c-est-toujours-pratique/' itemprop=url> <meta content=fr itemprop=inLanguage> <h1 itemprop='name headline'>Un alias git, c'est toujours pratique</h1> <time class=published datetime=2013-04-10 itemprop=datePublished> Publié le 10/04/2013 </time> <ul class=tags> <li> <i class='fa fa-tags'></i> </li> <li><a href="/blog/tags/git/">Git</a></li> <li><a href="/blog/tags/alias/">Alias</a></li> <li><a href="/blog/tags/middleman/">Middleman</a></li> </ul> <div class=post-body itemprop=articleBody> <p>Pour ce blog j&#39;utilise <a href="//middlemanapp.com">Middleman</a>, j&#39;ai donc un repository pour les sources. Mais dès qu&#39;il s&#39;agit de déployer (i.e. compiler puis pusher les fichiers compilés sur un autre repository, que <a href="//pages.github.com">github:pages</a> reconnait comme devant les mettre en ligne), voilà la séquence de commandes que je dois executer :</p> <pre class="highlight shell"><code><span class="gp">$ </span>git push&#x000A;<span class="gp">$ </span>middleman build --clean&#x000A;<span class="gp">$ </span>middleman deploy --clean&#x000A;</code></pre> <p>Épuisant.</p> <p>J&#39;ai donc besoin d&#39;un moyen d&#39;éxécuter toutes ces commandes d&#39;un coup. Comme un alias ou un scriptshell seraient trop faciles, j&#39;ai regardé du côté des <em>alias git</em>.</p> <p>En gros, je veux pouvoir tout simplement entrer :</p> <pre class="highlight shell"><code><span class="gp">$ </span>git dpush <span class="c"># 'dpush' commme 'deploy &amp; push'</span>&#x000A;</code></pre> <p>Il suffit donc de déclarer un alias git comme ça :</p> <pre class="highlight shell"><code><span class="gp">$ </span>git config alias.dpush <span class="s1">'!git push origin master &amp;&amp; middleman build --clean &amp;&amp; middleman deploy --clean'</span>&#x000A;</code></pre> <p>Cette commande va ajouter les lignes suivantes au fichier <code>.git/config</code> :</p> <pre class="highlight plaintext"><code>[alias]&#x000A;  dpush = !git push origin master &amp;&amp; middleman build --clean &amp;&amp; middleman deploy --clean&#x000A;</code></pre> <p>Voilà, plus qu&#39;à executer <code>git dpush</code> pour pusher son code, compiler, puis déployer un nouvel article.</p> <h4 id=notes>Notes</h4> <ol> <li>Le point d&#39;exclamation (!) en première position de l&#39;alias sert à indiquer que c&#39;est une commande à part entière. Sans ce point d&#39;exclamation, les alias portent par défaut sur d&#39;autres commandes git. Genre, pour pouvoir écrire <code>git st</code> au lieu de <code>git status</code>, comme <a href="//pioupioum.fr/developpement/git-alias-productivite.html">piouPiouM</a> : <code>&#x000A;[alias]&#x000A;st = status</code></li> <li>Comme on le déclare ici, l&#39;alias est local : il ne s&#39;applique qu&#39;au repository courant (d&#39;ailleurs il est stocké dans <code>.git/config</code> qui est la config du repository courant uniquement). Pour créer un alias qui fonctionne partout, il faut utiliser le switch <code>--global</code> : l&#39;alias sera alors déclaré non pas dans <code>.git/config</code> mais dans <code>~/.gitconfig</code> et sera donc accessible dans tous vos repository git.</li> </ol> <h4 id=sources>Sources</h4> <p>Tout est parti d&rsquo;<a href="//stackoverflow.com/a/3466589">une réponse sur StackOverflow</a></p> </div> <div class=author> Publié par <a href="https://twitter.com/michaelbaudino">Michael Baudino</a> <img alt='michael.baudino@alpine-lab.com' class=avatar src='//www.gravatar.com/avatar/db878dfa87aec08092efcb7cc12ab343?size=128'> </div> </article> <aside> <h3>Autres articles récents</h3> <ul> <li><a href="/blog/utiliser-les-presences-de-phoenix/">Utiliser les Presences de Phoenix</a></li> <li><a href="/blog/des-helpers-pour-verifier-la-version-de-rails/">Des helpers pour vérifier la version de Rails</a></li> <li><a href="/blog/skiwallet-a-la-conference-blend/">SkiWallet à la conférence Blend</a></li> <li><a href="/blog/installer-git-flow-dans-une-box-nitrous-io/">Installer git-flow dans une box Nitrous.IO</a></li> <li><a href="/blog/git-en-couleurs/">Git en couleurs</a></li> <li><a href="/blog/traduire-son-site-middleman-avec-locale/">Traduire son site Middleman avec Locale</a></li> <li><a href="/blog/generer-ses-vues-devise-en-haml/">Générer ses vues Devise en Haml</a></li> <li><a href="/blog/interdire-uniquement-l-enregistrement-de-nouveaux-utilisateurs-sous-devise/">Interdire uniquement l'enregistrement de nouveaux utilisateurs sous Devise</a></li> <li><a href="/blog/installer-font-awesome-sous-middleman/">Installer Font Awesome sous Middleman</a></li> </ul> </aside> </div> </div> <div id=corporate-btn> <a href="/">Alpine Lab <span class=caret></span> </a> </div> <footer> <p> Le blog d'<a rel=publisher href="https://plus.google.com/+AlpineLab">Alpine Lab</a> est publié sous license <a href="//creativecommons.org/licenses/by/3.0/fr/">Creative Commons Attribution 3.0 (cc-by-3.0)</a>. Le code est sous licence <a href="//opensource.org/licenses/MIT">MIT</a>. </p> </footer> </body> </html>